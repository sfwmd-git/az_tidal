<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tidal Wave Prediction System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .flowchart {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .step {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 20px;
            position: relative;
        }

        .step-header {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .process-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .process-box {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 4px solid #667eea;
        }

        .process-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }

        .process-box.api {
            border-left-color: #3498db;
            background: #ecf9ff;
        }

        .process-box.data {
            border-left-color: #2ecc71;
            background: #eafff0;
        }

        .process-box.model {
            border-left-color: #e74c3c;
            background: #ffecec;
        }

        .process-box.output {
            border-left-color: #f39c12;
            background: #fff8ec;
        }

        .process-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .process-detail {
            font-size: 0.9em;
            color: #555;
            line-height: 1.5;
        }

        .arrow {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin: 10px 0;
        }

        .parallel-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .legend-box {
            width: 30px;
            height: 20px;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 1.5em;
            }

            .process-group,
            .parallel-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üåä Tidal Wave Prediction System Flowchart</h1>

        <div class="flowchart">
            <!-- Start -->
            <div class="process-box" style="text-align: center; background: #90EE90; border: none;">
                <div class="process-title">üöÄ SYSTEM START</div>
                <div class="process-detail">Load Station Information (station_data.csv)</div>
            </div>

            <div class="arrow">‚Üì</div>

            <!-- Step 1: Data Collection -->
            <div class="step">
                <div class="step-header">STEP 1: Data Collection</div>

                <div class="process-group">
                    <div class="process-box model">
                        <div class="process-title">üì• Get Tide Data</div>
                        <div class="process-detail">
                            Script: py_1_Get Tide Data.py<br>
                            Source: NOAA Tides API<br>
                            Output: raw_water_data/
                        </div>
                    </div>

                    <div class="process-box api">
                        <div class="process-title">üåê NOAA Tides API</div>
                        <div class="process-detail">
                            api.tidesandcurrents.noaa.gov<br>
                            Historical water level observations<br>
                            Monthly CSV files per station
                        </div>
                    </div>

                    <div class="process-box model">
                        <div class="process-title">üì• Get ERA5 Data</div>
                        <div class="process-detail">
                            Script: py_2_Get ERA5 Data.py<br>
                            Source: CDS API<br>
                            Output: raw_era5_data/
                        </div>
                    </div>

                    <div class="process-box api">
                        <div class="process-title">üåê CDS API</div>
                        <div class="process-detail">
                            cds.climate.copernicus.eu<br>
                            Variables: u10, v10, MSLP, SST, SWH<br>
                            3-hourly resolution
                        </div>
                    </div>
                </div>

                <div class="arrow">‚Üì</div>

                <div class="process-group">
                    <div class="process-box data">
                        <div class="process-title">üßπ Clean Tide Data</div>
                        <div class="process-detail">
                            Script: py_3_Clean Tide Data.py<br>
                            Output: clean_water_data/
                        </div>
                    </div>

                    <div class="process-box data">
                        <div class="process-title">üßπ Clean ERA5 Data</div>
                        <div class="process-detail">
                            Script: py_4_Clean ERA5 Data.py<br>
                            Output: clean_era5_data/
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow">‚Üì</div>

            <!-- Step 2: Regression Preparation -->
            <div class="step">
                <div class="step-header">STEP 2: Regression Preparation & Modeling</div>

                <div class="process-group">
                    <div class="process-box model">
                        <div class="process-title">üìä Clean Regression Data</div>
                        <div class="process-detail">
                            Script: py_1_Clean Regression Data.py<br>
                            Combines tide + ERA5 data<br>
                            Calculates water level departures<br>
                            Normalizes variables
                        </div>
                    </div>

                    <div class="process-box data">
                        <div class="process-title">üíæ Regression Input Data</div>
                        <div class="process-detail">
                            input_data/<br>
                            normalization_data/
                        </div>
                    </div>
                </div>

                <div class="arrow">‚Üì</div>

                <div class="process-box model" style="max-width: 600px; margin: 0 auto;">
                    <div class="process-title">üî¨ Run Regression</div>
                    <div class="process-detail">
                        Script: py_2_Run Regression.py<br>
                        Monte Carlo cross-validation (10,000 iterations)<br>
                        80/20 train/test splits<br>
                        Models for 1-10 day lead times<br>
                        Output: regression_use_data/ & regression_all_data/
                    </div>
                </div>
            </div>

            <div class="arrow">‚Üì</div>

            <!-- Step 3: Generate Predictions -->
            <div class="step">
                <div class="step-header">STEP 3: Generate Predictions</div>

                <div class="parallel-group">
                    <div class="process-box model">
                        <div class="process-title">üå§Ô∏è GFS Deterministic</div>
                        <div class="process-detail">
                            Get GFS DET GRIB data<br>
                            Get Wave DET GRIB data<br>
                            Calc GFS DET predictions<br>
                            Source: NOAA NOMADS
                        </div>
                    </div>

                    <div class="process-box model">
                        <div class="process-title">üå§Ô∏è GFS Ensemble</div>
                        <div class="process-detail">
                            Get GFS ENS GRIB data<br>
                            Get Wave ENS GRIB data<br>
                            Calc GFS ENS predictions<br>
                            Source: NOAA NOMADS
                        </div>
                    </div>

                    <div class="process-box model">
                        <div class="process-title">üåç ECMWF Deterministic</div>
                        <div class="process-detail">
                            Calc ECMWF DET<br>
                            Source: Local ECMWF files<br>
                            1_data/forecasts/ECMWF/
                        </div>
                    </div>

                    <div class="process-box model">
                        <div class="process-title">üåç ECMWF Ensemble</div>
                        <div class="process-detail">
                            Calc ECMWF ENS<br>
                            Source: Local ECMWF files<br>
                            1_data/forecasts/ECMWF/
                        </div>
                    </div>
                </div>

                <div class="arrow">‚Üì</div>

                <div class="process-box data" style="max-width: 700px; margin: 0 auto;">
                    <div class="process-title">üîÑ Get Data Together</div>
                    <div class="process-detail">
                        Script: py_w0_Get Data Together.py<br>
                        Combines all predictions across stations<br>
                        Creates master datasets with metadata<br>
                        Generates component breakdowns<br>
                        Produces visualization-ready data
                    </div>
                </div>

                <div class="arrow">‚Üì</div>

                <div class="process-group">
                    <div class="process-box output">
                        <div class="process-title">üìÅ Master Datasets</div>
                        <div class="process-detail">*_master/</div>
                    </div>
                    <div class="process-box output">
                        <div class="process-title">üìÅ All Stations Data</div>
                        <div class="process-detail">*_all/</div>
                    </div>
                    <div class="process-box output">
                        <div class="process-title">üìÅ Component Data</div>
                        <div class="process-detail">*_components/</div>
                    </div>
                    <div class="process-box output">
                        <div class="process-title">üìÅ Graphs</div>
                        <div class="process-detail">*_graphs/</div>
                    </div>
                </div>
            </div>

            <div class="arrow">‚Üì</div>

            <!-- Step 4: Visualization -->
            <div class="step">
                <div class="step-header">STEP 4: Visualization</div>

                <div class="process-box output" style="max-width: 600px; margin: 0 auto;">
                    <div class="process-title">üìä Generate Plots</div>
                    <div class="process-detail">
                        Daily maximum tide predictions<br>
                        6-minute resolution predictions<br>
                        Component contributions<br>
                        Flood threshold overlays<br>
                        Station-specific plots with logos<br>
                        Output: 4_plots/
                    </div>
                </div>
            </div>

            <div class="arrow">‚Üì</div>

            <!-- End -->
            <div class="process-box" style="text-align: center; background: #FFB6C1; border: none;">
                <div class="process-title">‚úÖ SYSTEM END</div>
                <div class="process-detail">Predictions complete and visualized</div>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box" style="background: #ffecec; border-left: 4px solid #e74c3c;"></div>
                <span>Processing Scripts</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #ecf9ff; border-left: 4px solid #3498db;"></div>
                <span>External APIs</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #eafff0; border-left: 4px solid #2ecc71;"></div>
                <span>Data Storage</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #fff8ec; border-left: 4px solid #f39c12;"></div>
                <span>Output Files</span>
            </div>
        </div>
    </div>
</body>

</html>